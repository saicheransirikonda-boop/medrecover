<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üè• Medical-Grade Health & Fitness Coach v3.2 ENHANCED</title>
    <style>
        * { box-sizing: border-box; }
        body { 
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; 
            margin: 0; padding: 20px; background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh; color: #2c3e50;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        .slide { 
            display: none; background: rgba(255,255,255,0.97); 
            padding: 40px; border-radius: 24px; box-shadow: 0 25px 60px rgba(0,0,0,0.25);
            backdrop-filter: blur(20px); margin: 25px auto;
        }
        .slide.active { display: block; animation: slideIn 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94); }
        @keyframes slideIn { from { opacity: 0; transform: translateY(30px) scale(0.95); } to { opacity: 1; transform: translateY(0) scale(1); } }
        
        .header { text-align: center; margin-bottom: 40px; color: white; }
        .header h1 { font-size: 3em; background: linear-gradient(45deg, #4CAF50, #45a049); -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin: 0; }
        
        .demo-badge { position: fixed; top: 20px; right: 20px; background: linear-gradient(45deg, #FF6B6B, #FF8E53); color: white; padding: 10px 20px; border-radius: 25px; font-weight: 700; z-index: 1000; }
        
        .metrics-panel { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; margin: 25px 0; }
        .metric-card { background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 25px; border-radius: 20px; text-align: center; }
        .metric-value { font-size: 2.5em; font-weight: 800; }
        .metric-label { opacity: 0.9; font-size: 1.1em; }
        
        .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; margin-bottom: 30px; }
        .form-group { margin-bottom: 25px; }
        label { display: block; font-weight: 600; color: #2c3e50; margin-bottom: 10px; font-size: 15px; }
        input, select, textarea { width: 100%; padding: 16px 20px; border: 2px solid #e8ecf4; border-radius: 16px; font-size: 16px; background: #fafbff; transition: all 0.3s; }
        input:focus, select:focus, textarea:focus { border-color: #4CAF50; box-shadow: 0 0 0 4px rgba(76,175,80,0.15); }
        
        button { padding: 18px 36px; border: none; border-radius: 16px; font-weight: 700; font-size: 16px; cursor: pointer; transition: all 0.3s; margin: 5px; }
        .btn-primary { background: linear-gradient(45deg, #4CAF50, #45a049); color: white; }
        .btn-primary:hover { transform: translateY(-3px); box-shadow: 0 15px 30px rgba(76,175,80,0.4); }
        .btn-back { background: linear-gradient(45deg, #95a5a6, #7f8c8d); color: white; padding: 18px 28px; }
        
        /* NEW: Image Gallery */
        .image-gallery { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px; margin: 30px 0; }
        .image-card { background: white; border-radius: 16px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.15); transition: transform 0.3s; }
        .image-card:hover { transform: translateY(-8px); }
        .image-card img { width: 100%; height: 200px; object-fit: cover; }
        .image-card h4 { padding: 20px; margin: 0; background: linear-gradient(135deg, #f8f9fa, #e9ecef); font-weight: 700; }
        
        /* NEW: Diet Selector */
        .diet-selector { display: flex; gap: 20px; justify-content: center; margin: 30px 0; flex-wrap: wrap; }
        .diet-btn { padding: 15px 30px; border: 3px solid #4CAF50; background: rgba(76,175,80,0.1); color: #4CAF50; border-radius: 25px; font-weight: 700; cursor: pointer; transition: all 0.3s; }
        .diet-btn.active { background: linear-gradient(45deg, #4CAF50, #45a049); color: white; transform: scale(1.05); }
        
        .risk-analysis { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 25px; margin: 30px 0; }
        .risk-card { padding: 30px; border-radius: 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.15); position: relative; overflow: hidden; }
        .risk-header { display: flex; align-items: center; gap: 15px; margin-bottom: 20px; }
        .risk-critical { border-top: 6px solid #ff416c; background: linear-gradient(135deg, #ffeef2, #fff5f5); }
        .risk-high { border-top: 6px solid #f7971e; background: linear-gradient(135deg, #fff8e1, #fffde7); }
        
        .diet-plan, .workout-plan { background: linear-gradient(135deg, #f0f9f0, #e8f5e8); padding: 30px; border-radius: 20px; margin: 25px 0; border-left: 6px solid #4CAF50; }
        .meal-table, .workout-table { width: 100%; border-collapse: collapse; margin: 20px 0; background: white; border-radius: 12px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.08); }
        .meal-table th, .workout-table th { background: linear-gradient(45deg, #4CAF50, #45a049); color: white; padding: 18px; text-align: left; }
        .meal-table td, .workout-table td { padding: 15px; border-bottom: 1px solid #e8ecf4; }
        .meal-veg { border-left: 4px solid #4CAF50; }
        .meal-nonveg { border-left: 4px solid #FF5722; }
        
        .nav-buttons { display: flex; gap: 20px; justify-content: center; margin-top: 40px; flex-wrap: wrap; }
        .bmi-status { font-size: 1.3em; font-weight: 700; padding: 15px; border-radius: 12px; margin: 15px 0; text-align: center; }
        .bmi-normal { background: #d4edda; color: #155724; }
        .bmi-overweight { background: #fff3cd; color: #856404; }
        .bmi-obese { background: #f8d7da; color: #721c24; }
        
        @media (max-width: 768px) { .form-grid, .risk-analysis, .image-gallery { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="demo-badge">‚úÖ v3.2 ENHANCED - ALL FEATURES</div>
    <div class="container">
        <div class="header">
            <h1>üè• Medical Health & Fitness Coach</h1>
            <p style="opacity: 0.9;">Evidence-based protocols | Doctor-approved | Visual Enhanced</p>
        </div>

        <!-- SLIDE 1: COMPREHENSIVE ASSESSMENT w/ DEMO DATA -->
        <div id="slide1" class="slide active">
            <h2>üìä Step 1/6: Baseline Assessment</h2>
            <div class="metrics-panel">
                <div class="metric-card">
                    <div class="metric-value" id="bmiValue">30.1</div>
                    <div class="metric-label">BMI</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="idealWeight">61.4kg</div>
                    <div class="metric-label">Ideal Weight</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="maxHRValue">178bpm</div>
                    <div class="metric-label">Max HR</div>
                </div>
            </div>
            
            <div class="form-grid">
                <div class="form-group">
                    <label>Full Name & Age</label>
                    <input type="text" id="nameAge" value="Sarah Patel, 42 years">
                </div>
                <div class="form-group">
                    <label>Height (cm)</label>
                    <input type="number" id="height" value="165" oninput="calculateMetrics()">
                </div>
                <div class="form-group">
                    <label>Current Weight (kg)</label>
                    <input type="number" id="weight" value="82" step="0.1" oninput="calculateMetrics()">
                </div>
                <div class="form-group">
                    <label>Resting Heart Rate (bpm)</label>
                    <input type="number" id="restHR" value="78">
                </div>
                <div class="form-group">
                    <label>Activity Level</label>
                    <select id="activityLevel">
                        <option value="1.2">Sedentary (desk job)</option>
                        <option value="1.375" selected>Lightly active</option>
                        <option value="1.55">Moderately active</option>
                        <option value="1.725">Very active</option>
                        <option value="1.9">Extremely active</option>
                    </select>
                </div>
            </div>
            <div id="bmiStatus" class="bmi-status bmi-obese" style="display: block;">BMI 30.1 | Category: Obese</div>
            <div class="nav-buttons">
                <button class="btn-primary" onclick="goToSlide(2)">Next: Medical History ‚Üí</button>
            </div>
        </div>

        <!-- SLIDE 2: MEDICAL HISTORY w/ DEMO -->
        <div id="slide2" class="slide">
            <h2>üìã Step 2/6: Medical History <span style="color: #FF6B6B;">(DEMO LOADED)</span></h2>
            <div class="form-grid">
                <div class="form-group">
                    <label>Asthma Severity</label>
                    <select id="asthma">
                        <option value="0">None</option>
                        <option value="1" selected>Mild (occasional)</option>
                        <option value="2">Moderate (daily meds)</option>
                        <option value="3">Severe (hospitalized)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Thyroid Status</label>
                    <select id="thyroid">
                        <option value="0">Normal</option>
                        <option value="1" selected>Hypothyroidism</option>
                        <option value="2">Hyperthyroidism</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Sleep Quality (1-10)</label>
                    <input type="range" id="sleepQuality" min="1" max="10" value="5" oninput="updateSleepPreview()">
                    <span id="sleepPreview">5/10 - Fair</span>
                </div>
                <div class="form-group">
                    <label>Blood Test Results</label>
                    <textarea id="bloodTests" style="height: 120px;">Fasting Glucose: 135 mg/dL (HIGH)
HbA1c: 6.5% (Prediabetes)
Total Cholesterol: 235 mg/dL (Borderline HIGH)  
BP: 142/88 mmHg (Stage 1 Hypertension)</textarea>
                </div>
            </div>
            <div class="nav-buttons">
                <button class="btn-back" onclick="goToSlide(1)">‚Üê Back</button>
                <button class="btn-primary" onclick="goToSlide(3)">Next: Risk Analysis ‚Üí</button>
            </div>
        </div>

        <!-- SLIDE 3: COMPREHENSIVE RISK ANALYSIS -->
        <div id="slide3" class="slide">
            <h2>‚ö†Ô∏è Step 3/6: Medical Risk Stratification</h2>
            <div id="riskGrid" class="risk-analysis"></div>
            <div class="nav-buttons">
                <button class="btn-back" onclick="goToSlide(2)">‚Üê Edit History</button>
                <button class="btn-primary" onclick="goToSlide(4)">üçΩÔ∏è Generate Diet Plan ‚Üí</button>
            </div>
        </div>

        <!-- SLIDE 4: PROFESSIONAL DIET PLAN w/ VEG/NONVEG + IMAGES -->
        <div id="slide4" class="slide">
            <h2>üçΩÔ∏è Step 4/6: Precision Nutrition Plan</h2>
            <div class="diet-selector">
                <button class="diet-btn active" id="vegBtn" onclick="selectDiet('veg')">ü•¨ VEGETARIAN</button>
                <button class="diet-btn" id="nonvegBtn" onclick="selectDiet('nonveg')">üçó NON-VEG</button>
            </div>
            <div id="dietPlan" class="diet-plan"></div>
            <div class="image-gallery">
                <div class="image-card">
                    <img src="https://images.unsplash.com/photo-1529046572190-da3ffa6e4aa7?w=400" alt="Paneer breakfast">
                    <h4>Paneer Bhurji + Oats (400kcal)</h4>
                </div>
                <div class="image-card">
                    <img src="https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=400" alt="Chicken meal">
                    <h4>Chicken Breast + Sweet Potato (550kcal)</h4>
                </div>
                <div class="image-card">
                    <img src="https://images.unsplash.com/photo-1541599468178-c4fd7028a542?w=400" alt="Tofu dinner">
                    <h4>Tofu Stir-fry + Quinoa (500kcal)</h4>
                </div>
            </div>
            <div class="nav-buttons">
                <button class="btn-back" onclick="goToSlide(3)">‚Üê Risks</button>
                <button class="btn-primary" onclick="goToSlide(5)">üí™ Workout Protocols ‚Üí</button>
            </div>
        </div>

        <!-- SLIDE 5: WORKOUT PROTOCOLS w/ EXERCISE IMAGES -->
        <div id="slide5" class="slide">
            <h2>üí™ Step 5/6: Training Protocols</h2>
            <div id="workoutPlan" class="workout-plan"></div>
            <div class="image-gallery">
                <div class="image-card">
                    <img src="https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400" alt="Wall pushups">
                    <h4>Asthma-Safe Wall Pushups (3x12)</h4>
                </div>
                <div class="image-card">
                    <img src="https://images.unsplash.com/photo-1618354691551-110f697b758f?w=400" alt="Chair squats">
                    <h4>Chair Squats (3x12)</h4>
                </div>
                <div class="image-card">
                    <img src="https://images.unsplash.com/photo-1518998053901-5348d3961a04?w=400" alt="Zone 2 walk">
                    <h4>Zone 2 Nasal Walk (30min)</h4>
                </div>
            </div>
            <div class="nav-buttons">
                <button class="btn-back" onclick="goToSlide(4)">‚Üê Diet</button>
                <button class="btn-primary" onclick="goToSlide(6)">üìä Live Monitoring ‚Üí</button>
            </div>
        </div>

        <!-- SLIDE 6: ENHANCED LIVE MONITORING -->
        <div id="slide6" class="slide">
            <h2>üìä Step 6/6: Real-Time Monitoring Dashboard</h2>
            <div id="liveMonitor"></div>
            <div class="nav-buttons">
                <button class="btn-back" onclick="goToSlide(5)">‚Üê Workouts</button>
                <button class="btn-primary" onclick="restartApp()">üîÑ New Patient</button>
            </div>
        </div>
    </div>

    <script>
        let currentSlide = 1;
        let patientData = {};
        let bmi = 30.1, idealWeight = 61.4, maxHR = 178, currentDiet = 'veg';
        
        // NEW: Veg/Non-veg meal plans
        const vegMeals = [
            {time: '7:00 AM', meal: '100g paneer bhurji + 50g oats + berries', protein: '30g', carbs: '40g', fat: '15g', kcal: '400'},
            {time: '1:00 PM', meal: '150g chickpeas + 100g brown rice + veggies', protein: '40g', carbs: '50g', fat: '20g', kcal: '550'},
            {time: '4:00 PM', meal: '200g Greek yogurt + 20g almonds + apple', protein: '25g', carbs: '20g', fat: '15g', kcal: '350'},
            {time: '7:00 PM', meal: '150g tofu stir-fry + 50g quinoa + broccoli', protein: '35g', carbs: '45g', fat: '18g', kcal: '500'}
        ];
        
        const nonvegMeals = [
            {time: '7:00 AM', meal: '4 egg whites + 2 yolks + 50g oats + berries', protein: '30g', carbs: '40g', fat: '15g', kcal: '400'},
            {time: '1:00 PM', meal: '150g chicken breast + 100g sweet potato + broccoli', protein: '40g', carbs: '50g', fat: '20g', kcal: '550'},
            {time: '4:00 PM', meal: '100g tuna + 20g almonds + apple', protein: '25g', carbs: '20g', fat: '15g', kcal: '350'},
            {time: '7:00 PM', meal: '120g salmon + 50g quinoa + mixed greens', protein: '35g', carbs: '45g', fat: '18g', kcal: '500'}
        ];

        // Core Navigation - FIXED
        function goToSlide(slideNum) {
            document.querySelectorAll('.slide').forEach(s => s.classList.remove('active'));
            document.getElementById(slide${slideNum}).classList.add('active');
            currentSlide = slideNum;
            
            if (slideNum === 3) performRiskAnalysis();
            if (slideNum === 4) generateDietPlan();
            if (slideNum === 5) generateWorkoutPlan();
            if (slideNum === 6) initLiveMonitor();
        }

        // FIXED: Real-time BMI Calculator
        function calculateMetrics() {
            const height = parseFloat(document.getElementById('height').value) / 100;
            const weight = parseFloat(document.getElementById('weight').value);
            
            if (height && weight) {
                bmi = weight / (height * height);
                const age = parseInt(document.getElementById('nameAge')?.value.match(/\d+/)?.[0]) || 42;
                maxHR = 220 - age;
                idealWeight = 22.5 * (height * height);
                
                document.getElementById('bmiValue').textContent = bmi.toFixed(1);
                document.getElementById('idealWeight').textContent = idealWeight.toFixed(1) + 'kg';
                document.getElementById('maxHRValue').textContent = maxHR + 'bpm';
                
                const bmiStatusEl = document.getElementById('bmiStatus');
                bmiStatusEl.style.display = 'block';
                bmiStatusEl.className = 'bmi-status';
                bmiStatusEl.textContent = BMI ${bmi.toFixed(1)} | Category: ${getBMIcategory(bmi)};
                
                if (bmi < 18.5) bmiStatusEl.classList.add('bmi-normal');
                else if (bmi < 25) bmiStatusEl.classList.add('bmi-normal');
                else if (bmi < 30) bmiStatusEl.classList.add('bmi-overweight');
                else bmiStatusEl.classList.add('bmi-obese');
            }
        }

        function getBMIcategory(bmi) {
            if (bmi < 18.5) return 'Underweight';
            if (bmi < 25) return 'Normal';
            if (bmi < 30) return 'Overweight';
            return 'Obese';
        }

        // FIXED: Professional Risk Analysis
        function performRiskAnalysis() {
            capturePatientData();
            const risks = [
                {
                    title: 'Obesity Risk',
                    score: bmi > 30 ? 88 : bmi > 25 ? 65 : 22,
                    cause: BMI ${bmi.toFixed(1)} | Excess adipose tissue,
                    precaution: 'Progressive calorie deficit + resistance training',
                    steps: '1. 500kcal daily deficit<br>2. 1.6g protein/kg bodyweight<br>3. Strength 3x/week'
                },
                {
                    title: 'Metabolic Risk',
                    score: 92,
                    cause: 'Fasting glucose 135 mg/dL (Prediabetes)',
                    precaution: 'Postprandial walks + low-GI nutrition',
                    steps: '1. 15min walk after meals<br>2. Protein priority eating<br>3. Apple cider vinegar 1tsp pre-meal'
                },
                {
                    title: 'Asthma Risk', 
                    score: parseInt(patientData.asthma || 1) * 28,
                    cause: 'Mild asthma (Level 1)',
                    precaution: 'Nasal breathing + extended warmups',
                    steps: '1. 10min nasal breathing warmup<br>2. Never exceed 75% HRmax<br>3. Inhaler pre-workout'
                }
            ];

            let html = '';
            risks.forEach(risk => {
                const severity = risk.score > 75 ? 'critical' : risk.score > 50 ? 'high' : 'medium';
                html += `
                    <div class="risk-card risk-${severity}">
                        <div class="risk-header">
                            <div style="font-size: 2.5em; font-weight: 800;">${risk.score}</div>
                            <div>
                                <h3>${risk.title}</h3>
                                <div style="opacity: 0.8;">/100 Risk Score</div>
                            </div>
                        </div>
                        <div style="margin: 20px 0;">
                            <strong>üö® Root Cause:</strong> ${risk.cause}
                        </div>
                        <div style="margin: 15px 0;">
                            <strong>üõ°Ô∏è Precautions:</strong> ${risk.precaution}
                        </div>
                        <div style="background: rgba(76,175,80,0.1); padding: 15px; border-radius: 10px; border-left: 4px solid #4CAF50;">
                            <strong>üìã 3-Step Improvement:</strong><br>${risk.steps}
                        </div>
                    </div>
                `;
            });
            document.getElementById('riskGrid').innerHTML = html;
        }

        // NEW: Veg/Non-veg Diet Toggle
        function selectDiet(dietType) {
            currentDiet = dietType;
            document.getElementById('vegBtn').className = dietType === 'veg' ? 'diet-btn active' : 'diet-btn';
            document.getElementById('nonvegBtn').className = dietType === 'nonveg' ? 'diet-btn active' : 'diet-btn';
            generateDietPlan();
        }

        // ENHANCED: Diet Plan Generator
        function generateDietPlan() {
            const meals = currentDiet === 'veg' ? vegMeals : nonvegMeals;
            const maintenanceCals = (idealWeight * 24) * parseFloat(patientData.activityLevel || 1.375);
            const deficitCals = bmi > 25 ? maintenanceCals * 0.8 : maintenanceCals;
            
            let tableRows = '';
            let totalProtein = 0, totalCarbs = 0, totalFat = 0, totalKcal = 0;
            
            meals.forEach(meal => {
                const mealClass = currentDiet === 'veg' ? 'meal-veg' : 'meal-nonveg';
                tableRows += `
                    <tr class="${mealClass}">
                        <td><strong>${meal.time}</strong></td>
                        <td>${meal.meal}</td>
                        <td>${meal.protein}</td>
                        <td>${meal.carbs}</td>
                        <td>${meal.fat}</td>
                        <td><strong>${meal.kcal}</strong></td>
                    </tr>
                `;
                totalProtein += parseInt(meal.protein);
                totalCarbs += parseInt(meal.carbs);
                totalFat += parseInt(meal.fat);
                totalKcal += parseInt(meal.kcal);
            });
            
            const dietHtml = `
                <h3>${currentDiet === 'veg' ? 'ü•¨' : 'üçó'} Precision Nutrition Protocol - ${Math.round(deficitCals)} kcal</h3>
                <div style="display: flex; justify-content: space-between; margin: 20px 0; font-size: 1.3em;">
                    <div><strong>Maintenance:</strong> ${Math.round(maintenanceCals)} kcal</div>
                    <div><strong>Target:</strong> ${Math.round(deficitCals)} kcal</div>
                    <div><strong>Deficit:</strong> ${Math.round(maintenanceCals - deficitCals)} kcal</div>
                </div>
                
                <table class="meal-table">
                    <tr><th>Time</th><th>Meal</th><th>Protein</th><th>Carbs</th><th>Fat</th><th>Total Kcal</th></tr>
                    ${tableRows}
                    <tr style="font-weight: 700; background: #e8f5e8;">
                        <td><strong>TOTAL</strong></td>
                        <td></td>
                        <td><strong>${totalProtein}g</strong></td>
                        <td><strong>${totalCarbs}g</strong></td>
                        <td><strong>${totalFat}g</strong></td>
                        <td><strong>${totalKcal}</strong></td>
                    </tr>
                </table>
            `;
            document.getElementById('dietPlan').innerHTML = dietHtml;
        }

        // ENHANCED: Workout Plan
        function generateWorkoutPlan() {
            const html = `
                <h3>üèãÔ∏è Asthma-Safe Foundation Protocol (Weeks 1-4)</h3>
                <table class="workout-table">
                    <tr><th>Exercise</th><th>Sets/Reps</th><th>Frequency</th><th>HR Zone</th><th>RPE</th></tr>
                    <tr><td>Wall Pushups</td><td>3x12</td><td>3x/week</td><td>60-70%</td><td>5-6</td></tr>
                    <tr><td>Chair Squats</td><td>3x12</td><td>3x/week</td><td>60-70%</td><td>5-6</td></tr>
                    <tr><td>Zone 2 Walk</td><td>30min</td><td>3x/week</td><td>96-114bpm</td><td>4-5</td></tr>
                    <tr><td>Mobility Flow</td><td>15min</td><td>Daily</td><td>Resting</td><td>2-3</td></tr>
                </table>
                <div style="background: rgba(255,152,0,0.1); padding: 20px; border-radius: 12px; border-left: 6px solid #FF9800; margin-top: 20px;">
                    <strong>‚ö†Ô∏è ASTHMA PROTOCOL:</strong> Nasal breathing only | Never exceed 75% HRmax (133bpm) | Inhaler ready
                </div>
            `;
            document.getElementById('workoutPlan').innerHTML = html;
        }

        function capturePatientData() {
            patientData = {
                height: parseFloat(document.getElementById('height').value),
                weight: parseFloat(document.getElementById('weight').value),
                restHR: document.getElementById('restHR').value,
                activityLevel: document.getElementById('activityLevel').value,
                asthma: document.getElementById('asthma').value,
                thyroid: document.getElementById('thyroid').value,
                sleepQuality: document.getElementById('sleepQuality').value,
                bloodTests: document.getElementById('bloodTests').value
            };
        }

        function updateSleepPreview() {
            const score = document.getElementById('sleepQuality').value;
            document.getElementById('sleepPreview').textContent = ${score}/10 - ${score >= 7 ? 'Good' : score >= 5 ? 'Fair' : 'Poor'};
        }

        // NEW: Enhanced Live Monitoring
        function initLiveMonitor() {
            document.getElementById('liveMonitor').innerHTML = `
                <div style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 40px; border-radius: 20px; text-align: center;">
                    <h3 style="margin: 0 0 20px 0; font-size: 2.5em;">üì° LIVE MONITORING ACTIVE</h3>
                    <div style="font-size: 2em; margin: 20px 0; color: #4CAF50; font-weight: 700;">
                        Asthma-Safe Zone: <span style="font-size: 1.5em;">96-114 bpm</span>
                    </div>
                    <div style="margin: 30px 0;">
                        <input type="number" id="liveHRInput" value="78" style="font-size: 3em; width: 180px; padding: 20px; text-align: center; border-radius: 16px; border: 3px solid #4CAF50; background: rgba(255,255,255,0.9);" oninput="liveHRFeedback()">
                        <div id="hrFeedback" style="font-size: 1.8em; margin-top: 20px; padding: 20px; background: rgba(255,255,255,0.2); border-radius: 12px;">
                            Enter current HR for real-time coaching...
                        </div>
                    </div>
                    <div style="font-size: 1.2em; opacity: 0.9;">
                        <strong>ü§ñ AI COACH:</strong> Stay in green zone 20-40 minutes for optimal fat burn
                    </div>
                </div>
            `;
        }

        function liveHRFeedback() {
            const hr = parseInt(document.getElementById('liveHRInput').value) || 78;
            const feedbackEl = document.getElementById('hrFeedback');
            let status = '', color = '';
            
            if (hr >= 96 && hr <= 114) {
                status = '‚úÖ PERFECT ZONE! Stay here 20-40min. Nasal breathing.';
                color = '#4CAF50';
            } else if (hr > 114 && hr <= 133) {
                status = '‚ö†Ô∏è CAUTION ZONE. Slow down, focus breathing.';
                color = '#FF9800';
            } else if (hr > 133) {
                status = '‚ùå DANGER ZONE! STOP immediately. Use inhaler.';
                color = '#ff416c';
            } else {
                status = 'üîÑ Warm up gradually to 96-114 bpm.';
                color = '#2196F3';
            }
            
            feedbackEl.innerHTML = <strong>${status}</strong>;
            feedbackEl.style.color = color;
        }

        function restartApp() {
            document.querySelectorAll('input, select, textarea').forEach(el => {
                if (el.id === 'nameAge') el.value = 'Sarah Patel, 42 years';
                else if (el.id === 'height') el.value = '165';
                else if (el.id === 'weight') el.value = '82';
                else if (el.id === 'restHR') el.value = '78';
                else if (el.id === 'sleepQuality') el.value = '5';
                else el.value = '';
            });
            document.getElementById('bmiStatus').style.display = 'block';
            goToSlide(1);
            calculateMetrics();
        }

        // Initialize - ALL FEATURES READY
        updateSleepPreview();
        calculateMetrics();
        selectDiet('veg');
    </script>
</body>
</html>